dist: trusty
sudo: required
language: generic
services: docker

before_install:
    - sudo apt-get -qq update

script:
  - make -C test
  # We use the docker image from https://hub.docker.com/r/dxjoke/tectonic-docker/
  - docker pull dxjoke/tectonic-docker
  # Compiling multiple files as well as using biber:
  - docker run --mount src=$TRAVIS_BUILD_DIR,target=/usr/src/tex,type=bind dxjoke/tectonic-docker /bin/sh -c "tectonic --keep-intermediates --reruns 0 main.tex; biber main; tectonic main.tex"
  - bash <(curl -s https://codecov.io/bash) 
